# üöÄ CareerHub Deployment Guide

## Development Environment (Internet Access)

### Quick Start

Run the development server with network access:

```bash
./dev.sh
```

This will:
- Start backend on port 8080
- Start frontend on port 5173
- Configure both for network access
- Show you the URLs to share

### Production-like Deployment

For a production-like build:

```bash
./deploy.sh
```

This will:
- Build optimized backend binary
- Build optimized frontend (production build)
- Start both servers
- Show access URLs

To stop all servers:

```bash
./stop.sh
```

## Access URLs

After running the scripts, you'll get URLs like:

**Local Access:**
- Frontend: http://localhost:5173
- Backend: http://localhost:8080

**Network Access (share these):**
- Frontend: http://192.168.x.x:5173
- Backend: http://192.168.x.x:8080

> Replace `192.168.x.x` with your actual IP shown in the script output

## Firewall Configuration

### macOS

Allow incoming connections:

```bash
# Allow connections to port 8080 (backend)
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /path/to/careerhub-server

# Allow connections to port 5173 (frontend dev)
# Usually no action needed for development server
```

Or use System Preferences:
1. System Preferences ‚Üí Security & Privacy ‚Üí Firewall
2. Click "Firewall Options"
3. Add your terminal application or specific ports

### Linux (ufw)

```bash
sudo ufw allow 8080/tcp
sudo ufw allow 5173/tcp
sudo ufw reload
```

## Environment Variables

### Backend (.env)

Located in `backend/.env`:

```env
SERPAPI_KEY=your_api_key_here
PORT=8080
```

### Frontend (.env.local)

Auto-generated by `dev.sh`, but you can manually create in `frontend/.env.local`:

```env
VITE_API_URL=http://YOUR_IP:8080
```

## Sharing with Others

1. **Same Network:**
   - Share the Network URL (e.g., http://192.168.1.5:5173)
   - Others on the same WiFi can access it

2. **Internet (using ngrok):**

   ```bash
   # Install ngrok
   brew install ngrok  # macOS
   
   # Expose backend
   ngrok http 8080
   
   # Expose frontend (in another terminal)
   ngrok http 5173
   ```
   
   Update `frontend/.env.local` with the ngrok backend URL:
   ```env
   VITE_API_URL=https://your-backend-id.ngrok.io
   ```

3. **Internet (using Cloudflare Tunnel):**

   ```bash
   # Install cloudflared
   brew install cloudflare/cloudflare/cloudflared
   
   # Expose backend
   cloudflared tunnel --url http://localhost:8080
   
   # Expose frontend
   cloudflared tunnel --url http://localhost:5173
   ```

## Monitoring

### View Logs

**Backend logs:**
```bash
tail -f backend/backend.log
# or
tail -f backend/app.log  # Structured logs
```

**Frontend logs:**
```bash
tail -f frontend/frontend.log
```

### Check Status

```bash
# Check if backend is running
curl http://localhost:8080/health

# Check if frontend is serving
curl http://localhost:5173
```

## Troubleshooting

### Port Already in Use

```bash
# Kill processes on ports
lsof -ti:8080 | xargs kill -9
lsof -ti:5173 | xargs kill -9
```

### Can't Access from Other Devices

1. Check firewall settings
2. Ensure devices are on same network
3. Try disabling VPN temporarily
4. Check if IP address is correct:
   ```bash
   ifconfig | grep "inet "
   ```

### CORS Errors

The backend is configured to allow CORS from:
- http://localhost:5173
- http://localhost:3000
- http://localhost:4173

If accessing from network IP, update `backend/main.go`:

```go
AllowOrigins: []string{
    "http://localhost:5173", 
    "http://localhost:3000",
    "http://YOUR_IP:5173",  // Add this
},
```

## Scripts Overview

| Script | Purpose | Use Case |
|--------|---------|----------|
| `dev.sh` | Development mode | Hot reload, debugging |
| `deploy.sh` | Production build | Testing production build |
| `stop.sh` | Stop all servers | Clean shutdown |

## Performance Tips

1. **Development:** Use `dev.sh` for hot reload
2. **Testing:** Use `deploy.sh` for optimized builds
3. **Logs:** Monitor `app.log` for structured backend logs
4. **Network:** Use wired connection for better stability

## Security Notes

‚ö†Ô∏è **Important for Production:**

1. Never expose development servers to the internet long-term
2. Use proper authentication for production
3. Set up HTTPS with proper certificates
4. Use environment-specific API keys
5. Enable rate limiting
6. Set `GIN_MODE=release` for production

## Next Steps

For actual production deployment, consider:

- Docker containers
- Cloud platforms (Vercel, Netlify, Railway, Fly.io)
- Proper CI/CD pipeline
- Database integration
- User authentication
- Analytics and monitoring
